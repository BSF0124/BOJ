# [Gold V] 멀티버스 Ⅱ - 18869 

[문제 링크](https://www.acmicpc.net/problem/18869) 

### 성능 요약

메모리: 6164 KB, 시간: 204 ms

### 분류

값 / 좌표 압축, 정렬

### 제출 일자

2025년 5월 15일 11:06:32

# 📝 문제 소개

## 문제

M개의 우주가 있고, 각 우주에는 1부터 N까지 번호가 매겨진 행성이 N개 있다. 행성의 크기를 알고 있을때, 균등한 우주의 쌍이 몇 개인지 구해보려고 한다. 구성이 같은데 순서만 다른 우주의 쌍은 한 번만 센다.

두 우주 A와 B가 있고, 우주 A에 있는 행성의 크기는 A**₁**, A**₂**, ..., Aₙ, 우주 B에 있는 행성의 크기는 B**₁**, B**₂**, ..., Bₙ라고 하자. 두 우주의 행성 크기가 모든 1 ≤ i, j ≤ N에 대해서 아래와 같은 조건을 만족한다면, 두 우주를 균등하다고 한다.

- Aᵢ < Aⱼ → Bᵢ < Bⱼ
- Aᵢ = Aⱼ → Bᵢ = Bⱼ
- Aᵢ > Aⱼ → Bᵢ > Bⱼ

## 입력

첫째 줄에 우주의 개수 M과 각 우주에 있는 행성의 개수 N이 주어진다. 둘째 줄부터 M개의 줄에 공백으로 구분된 행성의 크기가 한 줄에 하나씩 1번 우주부터 차례대로 주어진다.

## 출력

첫째 줄에 균등한 우주의 쌍의 개수를 출력한다.

## 제한

- 2 ≤ M ≤ 100
- 3 ≤ N ≤ 10,000
- 1 ≤ 행성의 크기 ≤ 1,000,000

---

## 🧩 풀이

단순히 각 우주의 모든 행성을 비교를 하게 되면 시간복잡도는 **O(N² × M)**로, 최악의 경우 연산 수는 **50억 번**을 초과한다.

이러한 이유로 단순 비교로는 문제를 해결할 수 없는데, 문제의 핵심은 “값 자체”가 중요한 게 아니라 **“상대적인 순서”**가 중요하다는 것이다.

따라서 제한 시간 내에 문제를 해결하기 위해서는 데이터의 상대적인 순서나 위치는 유지하면서, 값의 범위를 줄이는 기법인 **좌표 압축**을 사용하면 된다.

각 우주의 행성 배열을 **좌표 압축**시킨 뒤 **동일한 배열이 몇 쌍인지** 세면 된다.
